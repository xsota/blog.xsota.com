---
layout: post
title: 開発用Android端末をPCと接続しっぱなしにすることが禁止された人の日記です
date: 2016-10-19 21:26:16.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
permalink: /:year/:month/:title.html
categories:
- 日記
- 開発
tags:
- adb
- Android
- USB
- wi-fi
- ワイヤレスデバッグ
- 充電禁止
---
<p>僕はいちおう会社員としてAndroidアプリ開発していますが、今日は禁止事項がひとつ増えました。</p>
<p>その禁止事項は、開発用端末を充電器に接続しっぱなしにすることです。</p>
<p>充電器に繋ぎっぱなしに(=PCと接続)してるとバッテリがヘタってきて、充電が早く切れちゃう。</p>
<p>それじゃ、外で使用する際に困る。という理由で充電器繋ぎっぱなしが禁止になってしまったので、これからはPCとAndroid端末をUSBケーブルで接続しないで開発しようと思います。</p>
<p>接続しっぱなしはバッテリにも悪いし、いままでバッテリにはとても悪いことをしていました。</p>
<p>ごめんよNexus5。</p>
<p>たしかに自分の端末で開発するときはバッテリに気を使って繋ぎっぱなしはあんまりしないようにしてました。</p>
<h2>ということで無線でadb connectしよう</h2>
<p>手順です。</p>
<ul>
<li>
<p>接続したいPCとAndroid端末を共通のWi-Fiに接続する。</p>
</li>
<li>
<p>Android端末をUSBケーブルでPCに接続します。</p>
</li>
<li>
<p>接続後に以下のコマンドを入力します。</p>
</li>
</ul>
<p><code>$ adb tcpip 5555</code></p>
<p>別に5555じゃなくてもいいです。好きなPortにしてください。</p>
<ul>
<li>
<p>USBケーブルを抜きます。さようならUSBケーブル。</p>
</li>
<li>
<p>Android端末に割り振られたIPアドレスを調べます。固定にしておいたほうが便利なんじゃないでしょうか。<br />
Versionにもよると思いますが、<br />
設定 > 端末情報 > 端末の状態 > IPアドレス で確認できます。</p>
</li>
<li>
<p>接続します。<br />
<code>$ adb connect &lt;device-ip-address&gt;</code></p>
</li>
<li>
<p>デバイス一覧を表示して確認してみます。<br />
こんな感じで表示されたら成功です。</p>
</li>
</ul>
<pre><code>$ adb devices
List of devices attached
&lt;device-ip-address&gt;:5555 device
</code></pre>
<p>これでバッテリもヘタらないし、なんかやたらと接触不良でadbの接続が切れまくるムカつく端末でも快適な生活ができるかと思います。</p>
<p>ちなみに自宅でUSB接続しないで開発してみようと思って一日だけチャレンジしたことがあるんですけど、adb installがUSBより遅かったりしましたが、意外と快適でした。</p>
<p>でも自宅だと基本的に充電のためにUSBでPCと接続されてることが多いのであんまり意味がありませんでした。</p>
<p>みなさんも会社で開発用端末が充電禁止になった場合はWi-Fi経由でadb connectしてみてはいかがでしょうか。</p>
<p>旅に出ますさようなら。</p>
<p>参考<br />
<a href="https://developer.android.com/studio/command-line/adb.html" target="_blank">https://developer.android.com/studio/command-line/adb.html</a></p>
